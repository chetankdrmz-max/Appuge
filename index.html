<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Smart FarmHer â€” Grow Good Sell Smart</title>

  <!-- UI libraries -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/papaparse/5.4.1/papaparse.min.js"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    :root{
      --emerald:#10b981;
      --muted:#6b7280;
      --card:#ffffff;
      --bg:#f3f6f8;
    }
    body {
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:var(--bg);
      color:#0f172a;
      margin:0;
    }
    .card { background: var(--card); border-radius: 12px; padding: 16px; box-shadow: 0 6px 18px rgba(2,6,23,0.06); }
    .sidebar { min-width: 260px; max-width: 320px; background: #fff; border-right:1px solid rgba(15,23,42,0.04); padding:20px; display:flex; flex-direction:column; gap:14px; height:calc(100vh - 40px); position:sticky; top:20px; }
    .brand-icon { width:31px; height:31px; display:inline-block; vertical-align:middle; margin-right:10px; border-radius:6px; object-fit:cover; }
    .brand-title { display:inline-block; vertical-align:middle; line-height:1; }
    .small-muted { color: var(--muted); font-size:13px; }
    #commodity-list button:hover { background:#f3f4f6; transition: background 120ms ease; cursor:pointer; }
    #commodity-list button.selected { background:var(--emerald); color:#fff; border-radius:8px; padding-left:10px; padding-right:10px; }
  </style>
</head>
<body>

  <!-- MAIN -->
  <div id="main-dashboard" style="display:flex;min-height:100vh">
    <!-- Sidebar -->
    <aside class="sidebar" aria-label="Controls">
      <!-- Branding REMOVED here -->

      <div>
        <label class="small-muted">Markets</label>
        <select id="market-select" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(15,23,42,0.06);margin-top:6px"></select>
      </div>

      <div>
        <label class="small-muted">Category</label>
        <select id="category-filter" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(15,23,42,0.06);margin-top:6px"><option>All</option></select>
      </div>

      <div>
        <label class="small-muted">Commodity</label>
        <div id="commodity-list" class="list" aria-label="Commodities list"></div>
      </div>
    </aside>

    <!-- Main area -->
    <div class="flex-1 main-wrap" style="padding:24px;">
      <header style="display:flex;align-items:center;justify-content:space-between;margin-bottom:18px">
        <div style="display:flex;align-items:center;gap:8px">
          <img src="icons/Smartfarmher.png" class="brand-icon" style="width:28px;height:28px"/>
          <div style="font-weight:700;color:var(--emerald);font-size:20px">Smart FarmHer</div>
        </div>
        <div style="display:flex;gap:10px;align-items:center">
          <button id="show-help-btn" style="background:#f3f4f6;padding:8px;border-radius:8px;border:1px solid rgba(15,23,42,0.04)">Help</button>
        </div>
      </header>

      <!-- tabs -->
      <div style="margin-bottom:16px" class="nav-tabs">
        <button id="tab-dashboard" class="active" style="background:none;border:none;padding:12px 10px;margin-right:6px">Dashboard</button>
        <button id="tab-prediction" style="background:none;border:none;padding:12px 10px;margin-right:6px">Predictive Analysis</button>
        <button id="tab-top-crops" style="background:none;border:none;padding:12px 10px">Top 10 Crops</button>
      </div>

      <!-- Dashboard content -->
      <div id="dashboard-content">
        <div class="card">
          <h3 style="margin:0">Latest Market Snapshot</h3>
          <div class="small-muted">Latest day across markets</div>
          <table style="margin-top:12px;width:100%;border-collapse:collapse">
            <thead><tr><th>Market</th><th>Commodity</th><th>Variety</th><th>Modal</th></tr></thead>
            <tbody id="snapshot-table-body"><tr><td colspan="4" style="text-align:center;padding:12px;color:var(--muted)">No data</td></tr></tbody>
          </table>
        </div>
      </div>

      <!-- Predictive Analysis -->
      <div id="prediction-content" class="hidden">
        <div class="card">
          <h3 style="margin:0 0 8px 0">90-Day Price Forecast</h3>
          <canvas id="forecast-chart" style="width:100%;height:300px"></canvas>
        </div>
      </div>
    </div>
  </div>

<script>
  // Minimal init for charts and tab switching
  document.getElementById('tab-dashboard').addEventListener('click', ()=>{
    document.getElementById('dashboard-content').classList.remove('hidden');
    document.getElementById('prediction-content').classList.add('hidden');
  });
  document.getElementById('tab-prediction').addEventListener('click', ()=>{
    document.getElementById('dashboard-content').classList.add('hidden');
    document.getElementById('prediction-content').classList.remove('hidden');
  });
</script>
</body>
</html>

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Smart FarmHer â€” Grow Good Sell Smart</title>

  <!-- UI libraries -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/papaparse/5.4.1/papaparse.min.js"></script>

  <style>
    :root{ --emerald:#10b981; --muted:#6b7280; --card:#ffffff; --bg:#f3f6f8; }
    body{ background:var(--bg); font-family:Inter,system-ui; color:#0f172a; }

    .card{ background:#fff; border-radius:12px; padding:16px; box-shadow:0 4px 12px rgba(0,0,0,0.05); }

    /* Tabs */
    .nav-tabs button{ padding:10px 14px; margin-right:8px; border:none; background:none; font-weight:500; color:#374151; }
    .nav-tabs button.active{ border-bottom:3px solid var(--emerald); color:var(--emerald); font-weight:600; }

    /* Snapshot table */
    .snapshot-table{ overflow:auto; border:1px solid #e5e7eb; border-radius:8px; }
    .snapshot-table th{ background:#f9fafb; font-weight:600; font-size:14px; padding:10px; text-align:left; }
    .snapshot-table td{ padding:10px; border-top:1px solid #f3f4f6; font-size:14px; }

    /* Top crops */
    .recommend-card{ border:1px solid #e5e7eb; border-radius:12px; padding:12px; background:#fff; }
    .top-recs{ display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:12px; }

    /* Commodity buttons */
    .commodity-btn{ display:block; width:100%; padding:10px; text-align:left; border-radius:8px; border:none; background:transparent; }
    .commodity-btn:hover{ background:#f3f4f6; }
    .commodity-btn.selected{ background:var(--emerald); color:#fff; }

    /* Scrollbar */
    #commodity-list::-webkit-scrollbar{ width:12px; }
    #commodity-list::-webkit-scrollbar-thumb{ background:#cbd5e1; border-radius:8px; }

    /* Sticky filter */
    .filters-sticky{ position:sticky; top:12px; }

    /* Sidebar mobile overlay */
    @media(max-width:900px){
      .sidebar{ position:fixed; left:-320px; top:0; height:100vh; width:280px; background:#fff; z-index:1200; transition:left .2s; }
      body.sidebar-open .sidebar{ left:0; }
      .date-stack{ flex-direction:column; }
      .date-stack input{ width:100%; }
    }

    .chart-card,.forecast-card{ height:340px; }
  </style>
</head>
<body>

<!-- START SCREEN -->
<div id="start-screen" class="start-bg">
  <div class="card" style="max-width:900px;margin:auto">
    <div style="display:flex;align-items:center;gap:10px;">
      <img src="icons/Smartfarmher.png" class="brand-icon" style="width:40px;height:40px"/>
      <div>
        <div style="font-size:22px;font-weight:700;color:var(--emerald)">Smart FarmHer</div>
        <div style="font-size:14px;color:var(--muted)">Grow Good Sell Smart</div>
      </div>
    </div>
    <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap">
      <input id="file-input" type="file" accept=".csv,.xlsx,.xls,text/csv" class="border p-2 rounded flex-1"/>
      <button id="start-analysis-btn" class="bg-emerald-500 text-white px-4 py-2 rounded"><i class="fas fa-cloud-download-alt"></i> Load Preloaded Data</button>
      <button id="load-local-btn" class="bg-gray-800 text-white px-4 py-2 rounded"><i class="fas fa-save"></i> Load Saved</button>
    </div>
  </div>
</div>

<!-- MAIN -->
<div id="main-dashboard" style="display:none;min-height:100vh;flex">
  <!-- Sidebar -->
  <aside class="sidebar filters-sticky p-4 border-r" aria-label="Filters">
    <label class="text-sm text-gray-500">Markets</label>
    <select id="market-select" class="w-full p-2 border rounded mb-3"></select>

    <label class="text-sm text-gray-500">Category</label>
    <select id="category-filter" class="w-full p-2 border rounded mb-3"><option>All</option></select>

    <label class="text-sm text-gray-500">Commodity</label>
    <div id="commodity-list" class="list border rounded p-2 max-h-48 overflow-auto mb-3"></div>

    <label class="text-sm text-gray-500">Variety</label>
    <select id="variety-filter" class="w-full p-2 border rounded mb-3"><option>All</option></select>

    <label class="text-sm text-gray-500">Date range</label>
    <div class="date-stack flex gap-2 mb-3">
      <input id="start-date" type="date" class="p-2 border rounded flex-1"/>
      <input id="end-date" type="date" class="p-2 border rounded flex-1"/>
    </div>
    <div class="flex gap-2">
      <button id="apply-filters" class="bg-emerald-500 text-white rounded px-3 py-2 flex-1">Apply</button>
      <button id="reset-filters" class="bg-gray-100 rounded px-3 py-2 flex-1">Reset</button>
    </div>
  </aside>

  <!-- Content -->
  <main class="flex-1 p-4">
    <div style="display:flex;align-items:center;justify-content:space-between">
      <div style="display:flex;align-items:center;gap:8px">
        <img src="icons/Smartfarmher.png" class="w-8 h-8"/>
        <div style="font-weight:700;color:var(--emerald);font-size:20px">Smart FarmHer</div>
      </div>
      <button id="mobile-sidebar-toggle" class="md:hidden p-2 border rounded"><i class="fas fa-bars"></i></button>
    </div>

    <!-- Tabs -->
    <div class="nav-tabs mt-4 mb-4">
      <button id="tab-dashboard" class="active">Dashboard</button>
      <button id="tab-prediction">Predictive Analysis</button>
      <button id="tab-top-crops">Top 10 Crops</button>
    </div>

    <!-- Dashboard -->
    <section id="dashboard-content">
      <div class="card mb-4">
        <h3 class="font-semibold mb-2">Latest Market Snapshot <span id="snapshot-date" class="text-gray-500 text-sm"></span></h3>
        <div class="snapshot-table">
          <table class="min-w-full text-sm">
            <thead><tr><th>Market</th><th>Commodity</th><th>Variety</th><th>Modal</th><th>Min</th><th>Max</th><th>Trend</th></tr></thead>
            <tbody id="snapshot-table-body"><tr><td colspan="7" class="text-center text-gray-400">No data</td></tr></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Prediction -->
    <section id="prediction-content" class="hidden">
      <div class="card forecast-card mb-4">
        <h3 class="font-semibold mb-2">90-Day Price Forecast</h3>
        <canvas id="forecast-chart"></canvas>
      </div>
    </section>

    <!-- Top crops -->
    <section id="top-crops-content" class="hidden">
      <div class="card">
        <h3 class="font-semibold mb-2">Top Crop Recommendations</h3>
        <div id="top-crops-container" class="top-recs"></div>
      </div>
    </section>
  </main>
</div>

<script>
// keep your same JS logic here (unchanged, just UI fixes above)
</script>
</body>
</html>
